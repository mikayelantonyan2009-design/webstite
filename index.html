<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Open Games</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">

<style>

body{
margin:0;
font-family:'Orbitron',sans-serif;
display:flex;
flex-direction:column;
align-items:center;
background:linear-gradient(135deg,#87CEEB,#ff4d4d);
min-height:100vh;
}

/* HEADER */

header{
width:100%;
background:white;
text-align:center;
padding:15px 0;
box-shadow:0 2px 6px rgba(0,0,0,.2);
position:relative;
}

header h1{
margin:0;
font-size:48px;
}

.open{
color:#ff2e2e;
text-shadow:0 0 20px #ff2e2e,0 0 40px #ff2e2e;
}

.games{
color:#87CEEB;
text-shadow:0 0 20px #87CEEB,0 0 40px #87CEEB;
}

/* BACK BUTTON */

#backBtn{
position:absolute;
left:15px;
top:15px;
padding:10px 22px;
font-size:18px;
border:none;
border-radius:10px;
background:white;
cursor:pointer;
display:none;
font-family:'Orbitron',sans-serif;
}

.red-glow{
color:#ff2e2e;
text-shadow:0 0 15px #ff2e2e,0 0 30px #ff2e2e;
}

.blue-glow{
color:#87CEEB;
text-shadow:0 0 15px #87CEEB,0 0 30px #87CEEB;
}

/* GAME SELECT */

.game-selection{
display:flex;
gap:60px;
margin-top:120px;
}

.game-btn{
font-size:36px;
padding:40px 70px;
background:white;
border:none;
border-radius:14px;
cursor:pointer;
}

/* MENUS */

.mode-selection,
.xo-selection,
.difficulty-selection{
display:none;
gap:40px;
margin-top:40px;
}

button{
font-family:'Orbitron',sans-serif;
padding:15px 30px;
font-size:20px;
border:none;
border-radius:10px;
background:white;
cursor:pointer;
}

/* SCOREBOARD */

.scoreboard-box{
display:none;
gap:50px;
margin:20px;
background:white;
padding:10px 30px;
border-radius:12px;
font-size:28px;
}

.score-x{
color:#ff2e2e;
text-shadow:0 0 20px #ff2e2e,0 0 40px #ff2e2e;
}

.score-o{
color:#87CEEB;
text-shadow:0 0 20px #87CEEB,0 0 40px #87CEEB;
}

/* BOARD */

.board{
display:none;
grid-template-columns:repeat(3,100px);
grid-template-rows:repeat(3,100px);
gap:8px;
position:relative;
}

.cell{
background:white;
border-radius:12px;
display:flex;
align-items:center;
justify-content:center;
font-size:48px;
cursor:pointer;
}

.x{
color:#ff2e2e;
text-shadow:0 0 15px #ff2e2e;
}

.o{
color:#87CEEB;
text-shadow:0 0 15px #87CEEB;
}

/* WIN LINE */

.line{
position:absolute;
height:6px;
border-radius:4px;
transform-origin:left center;
}

/* STATUS */

#status{
color:white;
font-size:24px;
margin:15px;
}

/* CONTROL BUTTONS */

.controls{
margin-top:10px;
display:none;
gap:20px;
}

#airHockey{
margin-top:30px;
background:#0b1d35;
border-radius:20px;
box-shadow:
0 0 25px #87CEEB,
0 0 60px #87CEEB inset;
}

/* Goal glow */
.goalGlow{
box-shadow:0 0 20px red,0 0 40px red;
}

</style>
</head>

<body>

<header>
<button id="backBtn" onclick="goBack()" class="red-glow">‚Üê Back</button>
<h1><span class="open">Open</span> <span class="games">Games</span></h1>
</header>

<!-- GAME SELECT -->
<div class="game-selection" id="gameSelection">
<button class="game-btn blue-glow" onclick="openTicTacToe()">Tic Tac Toe</button>
<button class="game-btn red-glow" onclick="openHockeyMenu()">Air Hockey</button>
</div>
<div class="difficulty-selection" id="hockeyDifficulty">
<button class="blue-glow" onclick="startHockey('easy')">Easy</button>
<button class="red-glow" onclick="startHockey('medium')">Medium</button>
<button class="blue-glow" onclick="startHockey('hard')">Hard</button>
</div>
  
<!-- MODE -->
<div class="mode-selection" id="modeSelection">
<button class="red-glow" onclick="chooseMode('player')">Vs Player</button>
<button class="blue-glow" onclick="chooseMode('computer')">Vs Computer</button>
</div>

<!-- XO -->
<div class="xo-selection" id="xoSelection">
<button class="red-glow" onclick="chooseXO('X')">Play as X</button>
<button class="blue-glow" onclick="chooseXO('O')">Play as O</button>
</div>

<!-- DIFFICULTY -->
<div class="difficulty-selection" id="difficultySelection">
<button class="red-glow" onclick="chooseDifficulty('easy')">Easy</button>
<button class="blue-glow" onclick="chooseDifficulty('medium')">Medium</button>
<button class="red-glow" onclick="chooseDifficulty('hard')">Hard</button>
</div>

<!-- SCOREBOARD -->
<div class="scoreboard-box" id="scoreboard">
<div class="score-x" id="scoreX">0</div>
<div class="score-o" id="scoreO">0</div>
</div>

<div class="board" id="board"></div>
<canvas id="airHockey" width="900" height="500" style="display:none;"></canvas>
  
<div id="status"></div>

<div class="controls" id="controls">
<button class="red-glow" onclick="restartGame()">Restart</button>
<button class="blue-glow" onclick="nextRound()">Next Round</button>
</div>

<script>

/* DOM */

const gameSelection=document.getElementById("gameSelection")
const modeSelection=document.getElementById("modeSelection")
const xoSelection=document.getElementById("xoSelection")
const difficultySelection=document.getElementById("difficultySelection")
const boardElement=document.getElementById("board")
const scoreboard=document.getElementById("scoreboard")
const backBtn=document.getElementById("backBtn")
const controls=document.getElementById("controls")
const statusText=document.getElementById("status")

const scoreX=document.getElementById("scoreX")
const scoreO=document.getElementById("scoreO")

/* VARIABLES */

let cells=[]
let board=["","","","","","","","",""]
let currentPlayer="X"
let playerSymbol="X"
let aiPlayer="O"
let gameMode=null
let gameOver=false
let aiDifficulty="medium"
let scores={X:0,O:0}
let winningLine=null

const wins=[
[0,1,2],[3,4,5],[6,7,8],
[0,3,6],[1,4,7],[2,5,8],
[0,4,8],[2,4,6]
]

/* OPEN GAME */

function openTicTacToe(){
gameSelection.style.display="none"
modeSelection.style.display="flex"
backBtn.style.display="block"
}

function openHockeyMenu(){

gameSelection.style.display="none"
document.getElementById("hockeyDifficulty").style.display="flex"
backBtn.style.display="block"

}

/* BACK */

function goBack(){

document.getElementById("hockeyDifficulty").style.display="none"
hockeyRunning = false
canvas.style.display = "none"
ctx.clearRect(0,0,canvas.width,canvas.height)
gameSelection.style.display="flex"
modeSelection.style.display="none"
xoSelection.style.display="none"
difficultySelection.style.display="none"

boardElement.style.display="none"
scoreboard.style.display="none"
controls.style.display="none"

backBtn.style.display="none"

statusText.textContent=""

scores={X:0,O:0}
updateScoreboard()

}

/* MODE */

function chooseMode(mode){
gameMode=mode==="computer"?"ai":"player"
modeSelection.style.display="none"
xoSelection.style.display="flex"
}

/* SYMBOL */

function chooseXO(symbol){

playerSymbol=symbol
aiPlayer=symbol==="X"?"O":"X"

xoSelection.style.display="none"

if(gameMode==="ai"){
difficultySelection.style.display="flex"
}else{
startGame()
}

}

/* DIFFICULTY */

function chooseDifficulty(level){
aiDifficulty=level
difficultySelection.style.display="none"
startGame()
}

/* START */

function startGame(){

board=["","","","","","","","",""]
gameOver=false
currentPlayer="X"

createBoard()

boardElement.style.display="grid"
scoreboard.style.display="flex"
controls.style.display="flex"

statusText.textContent=""

if(gameMode==="ai" && aiPlayer==="X"){
setTimeout(makeAIMove,400)
}

}

/* BOARD */

function createBoard(){

boardElement.innerHTML=""
cells=[]

for(let i=0;i<9;i++){

const cell=document.createElement("div")
cell.className="cell"
cell.dataset.index=i

cell.onclick=()=>{

if(board[i]!==""||gameOver) return
makeMove(i)

}

boardElement.appendChild(cell)
cells.push(cell)

}

}

/* MOVE */

let hockeyDifficulty = "medium"
let aiSpeed = 0.05

function startHockey(level){

hockeyDifficulty = level

if(level==="easy") aiSpeed = 0.03
if(level==="medium") aiSpeed = 0.06
if(level==="hard") aiSpeed = 0.12

document.getElementById("hockeyDifficulty").style.display="none"

/* hide other menus */
modeSelection.style.display="none"
xoSelection.style.display="none"
difficultySelection.style.display="none"
boardElement.style.display="none"
scoreboard.style.display="none"
controls.style.display="none"

/* show rink */
gameSelection.style.display="none"
canvas.style.display="block"
backBtn.style.display="block"
backBtn.style.display="block"

/* reset puck + paddles */
player.x = 200
player.y = 250

ai.x = 700
ai.y = 250

resetPuck()

hockeyRunning = true
gameLoop()

}

function makeMove(i){

board[i]=currentPlayer
cells[i].textContent=currentPlayer
cells[i].classList.add(currentPlayer==="X"?"x":"o")

if(checkWin()) return

if(board.every(c=>c!=="")){
statusText.textContent="Draw"
gameOver=true
return
}

currentPlayer=currentPlayer==="X"?"O":"X"

if(gameMode==="ai" && currentPlayer===aiPlayer && !gameOver){
setTimeout(makeAIMove,400)
}

}

/* CHECK WIN */

function checkWin(){

for(let combo of wins){

const[a,b,c]=combo

if(board[a]&&board[a]===board[b]&&board[a]===board[c]){

gameOver=true

scores[currentPlayer]++
updateScoreboard()

drawLine(combo,currentPlayer==="X"?"red":"skyblue")

statusText.textContent=currentPlayer+" Wins"

return true
}

}

return false

}

/* LINE */

function drawLine(combo,color){

if(winningLine) winningLine.remove()

const size=100
const gap=8

const r1=Math.floor(combo[0]/3)
const c1=combo[0]%3

const r2=Math.floor(combo[2]/3)
const c2=combo[2]%3

const x1=c1*(size+gap)+size/2
const y1=r1*(size+gap)+size/2

const x2=c2*(size+gap)+size/2
const y2=r2*(size+gap)+size/2

const length=Math.hypot(x2-x1,y2-y1)
const angle=Math.atan2(y2-y1,x2-x1)*180/Math.PI

const line=document.createElement("div")
line.className="line"

line.style.width=length+"px"
line.style.left=x1+"px"
line.style.top=y1+"px"
line.style.transform=`rotate(${angle}deg)`
line.style.background=color
line.style.boxShadow=`0 0 15px ${color},0 0 30px ${color}`

boardElement.appendChild(line)
winningLine=line

}

/* SCORE */

function updateScoreboard(){
scoreX.textContent=scores.X
scoreO.textContent=scores.O
}

/* RESTART */

function restartGame(){
scores={X:0,O:0}
updateScoreboard()
startGame()
}

/* NEXT */

function nextRound(){
startGame()
}

/* AI */

function makeAIMove(){

let move

if(aiDifficulty==="easy"){
move=randomMove()
}else{
move=smartMove()??randomMove()
}

makeMove(move)

}

function randomMove(){

const empty=board.map((v,i)=>v===""?i:null).filter(v=>v!==null)

return empty[Math.floor(Math.random()*empty.length)]

}

function smartMove(){

for(let combo of wins){

const vals=combo.map(i=>board[i])

if(vals.filter(v=>v===aiPlayer).length===2 && vals.includes("")){
return combo[vals.indexOf("")]
}

}

const opponent=aiPlayer==="X"?"O":"X"

for(let combo of wins){

const vals=combo.map(i=>board[i])

if(vals.filter(v=>v===opponent).length===2 && vals.includes("")){
return combo[vals.indexOf("")]
}

}

return null

}

/* ================= AIR HOCKEY ================= */

const canvas = document.getElementById("airHockey");
const ctx = canvas.getContext("2d");

let hockeyRunning = false

let puck = {
x:450,
y:250,
vx:4,
vy:3,
r:10
};

let puckActive = flase
let player = {
x:200,
y:250,
r:22
};


let ai = {
x:700,
y:250,
r:22
};

function openAirHockey(){

gameSelection.style.display="none"
modeSelection.style.display="none"
xoSelection.style.display="none"
difficultySelection.style.display="none"

boardElement.style.display="none"
scoreboard.style.display="none"
controls.style.display="none"

canvas.style.display="block"
backBtn.style.display="block"

hockeyRunning = true
gameLoop()

}

canvas.addEventListener("mousemove", e => {

const rect = canvas.getBoundingClientRect()

player.x = e.clientX - rect.left
player.y = e.clientY - rect.top

if(player.x > canvas.width/2 - 30) player.x = canvas.width/2 - 30

player.x = Math.max(player.r + 10, player.x)
player.y = Math.max(player.r + 10, Math.min(canvas.height - player.r - 10, player.y))

})

function drawTable(){

ctx.shadowBlur = 0
ctx.fillStyle = "white"
ctx.fillRect(0,0,canvas.width,canvas.height)

ctx.lineWidth = 12
ctx.strokeStyle = "#87CEEB"
ctx.shadowColor = "#87CEEB"
ctx.shadowBlur = 20
ctx.strokeRect(10,10,canvas.width-20,canvas.height-20)

ctx.shadowBlur = 0
ctx.strokeStyle = "red"
ctx.lineWidth = 4
ctx.beginPath()
ctx.moveTo(canvas.width/2,0)
ctx.lineTo(canvas.width/2,canvas.height)
ctx.stroke()

ctx.beginPath()
ctx.arc(canvas.width/2,canvas.height/2,60,0,Math.PI*2)
ctx.stroke()

ctx.shadowColor = "red"
ctx.shadowBlur = 25
ctx.fillStyle = "red"

ctx.fillRect(0,200,20,100)
ctx.fillRect(canvas.width-20,200,20,100)

}

function drawCircle(x,y,r,color,glow){

ctx.beginPath()
ctx.arc(x,y,r,0,Math.PI*2)

ctx.fillStyle=color
ctx.shadowColor=glow
ctx.shadowBlur=20

ctx.fill()
ctx.closePath()

}

function update(){

puck.x += puck.vx
puck.y += puck.vy

// bounce top/bottom
if(puck.y < 20 || puck.y > canvas.height - 20){
puck.vy *= -1
}

// right wall / goal
if(puck.x > canvas.width - 20){
if(puck.y > 200 && puck.y < 300){
resetPuck()
}else{
puck.vx *= -1
puck.x = canvas.width - 20
}
}

// left wall / goal
if(puck.x < 20){
if(puck.y > 200 && puck.y < 300){
resetPuck()
}else{
puck.vx *= -1
puck.x = 20
}
}

checkCollision(player)
checkCollision(ai)

// AI movement
ai.x += (puck.x - ai.x) * aiSpeed
ai.y += (puck.y - ai.y) * aiSpeed

}

function checkCollision(p){

const dx=puck.x-p.x
const dy=puck.y-p.y
const dist=Math.sqrt(dx*dx+dy*dy)

if(dist<p.r+puck.r){

const angle=Math.atan2(dy,dx)

puck.vx = Math.cos(angle)*6
puck.vy = Math.sin(angle)*6
puckActive = true
}

}

function resetPuck(){

puck.x = canvas.width/2
puck.y = canvas.height/2
puck.vx = 0
puck.vy = 0
puckActive = false

}

function gameLoop(){

if(!hockeyRunning) return

ctx.clearRect(0,0,canvas.width,canvas.height)

drawTable()
update()

drawCircle(puck.x,puck.y,puck.r,"black","black")
drawCircle(player.x,player.y,player.r,"#87CEEB","#87CEEB")
drawCircle(ai.x,ai.y,ai.r,"#87CEEB","#87CEEB")

requestAnimationFrame(gameLoop)

}

</script>
</body>
</html>
